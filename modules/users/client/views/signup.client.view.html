<section ng-controller="UsersCreateController as userCtrl">
  <div class="modal-header">
    <h3 class="modal-title">{{modalTitle}}</h3>
  </div>
  <div class="modal-body" ng-init="init()">
    <form name="createUserForm" novalidate>
      <fieldset>
        <label>Student:</label>
        <div class="row">
          <div class="form-group col-xs-3">
            <input type="text" id="saintname" name="saintname" class="form-control" ng-model="user.saintName" placeholder="Saint Name" required>
            <div class="help-block" ng-messages="createUserForm.saintName.$error" ng-if="createUserForm.saintName.$touched">
              <p ng-message="required">Saint name is required.</p>
            </div>
          </div>
          <div class="form-group col-xs-3">
            <input type="text" id="lastname" name="lastname" class="form-control" ng-model="user.lastName" placeholder="Last Name" required>
            <div class="help-block" ng-messages="createUserForm.lastName.$error" ng-if="createUserForm.lastName.$touched">
              <p ng-message="required">Last name is required.</p>
            </div>
          </div>
          <div class="form-group col-xs-2">
            <input type="text" id="middlename" name="middlename" class="form-control" ng-model="user.middleName" placeholder="Middle Name">
          </div>
          <div class="form-group col-xs-3">
            <input type="text" id="firstname" name="firstname" class="form-control" ng-model="user.firstName" placeholder="First Name" required>
            <div class="help-block" ng-messages="createUserForm.firstName.$error" ng-if="createUserForm.firstName.$touched">
              <p ng-message="required">First name is required.</p>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-7">
            <div class="row">
              <div class="form-group col-xs-7">
                <select class="form-control" id="gender" name="gender" ng-model="user.gender" required>
                  <option value="">-- Select Gender --</option>
                  <option value="MALE">MALE</option>
                  <option value="FEMALE">FEMALE</option>
                </select>
                <div class="help-block" ng-messages="createUserForm.gender.$error" ng-if="createUserForm.gender.$touched">
                  <p ng-message="required">Gender is required.</p>
                </div>
              </div>
              <div class="form-group col-xs-5">
                <input type="date" id="birthdate" name="birthdate" class="form-control" ng-model="user.birthDate" required>
                <div class="help-block" ng-messages="createUserForm.birthdate.$error" ng-if="createUserForm.birthdate.$touched">
                  <p ng-message="required">Birth date is required.</p>
                </div>
              </div>
            </div>
            <label>Student Father:</label>
            <div class="row">
              <div class="form-group col-xs-6">
                <input type="text" id="fatherlastmame" name="fatherlastmame" class="form-control" ng-model="user.fatherLastName" placeholder="Father Last Name" required>
                <div class="help-block" ng-messages="createUserForm.fatherlastmame.$error" ng-if="createUserForm.fatherlastmame.$touched">
                  <p ng-message="required">Father last name is required.</p>
                </div>
              </div>
              <div class="form-group col-xs-6">
                <input type="text" id="fatherfirstmame" name="fatherfirstmame" class="form-control" ng-model="user.fatherFirstName" placeholder="Father First Name" required>
                <div class="help-block" ng-messages="createUserForm.fatherfirstmame.$error" ng-if="createUserForm.fatherfirstmame.$touched">
                  <p ng-message="required">Father first name is required.</p>
                </div>
              </div>
            </div>
            <label>Student Mother:</label>
            <div class="row">
              <div class="form-group col-xs-6">
                <input type="text" id="motherlastmame" name="motherlastmame" class="form-control" ng-model="user.motherLastName" placeholder="Mother Last Name" required>
                <div class="help-block" ng-messages="createUserForm.motherlastmame.$error" ng-if="createUserForm.motherlastmame.$touched">
                  <p ng-message="required">Mother last name is required.</p>
                </div>
              </div>
              <div class="form-group col-xs-6">
                <input type="text" id="motherfirstmame" name="motherfirstmame" class="form-control" ng-model="user.motherFirstName" placeholder="Mother First Name" required>
                <div class="help-block" ng-messages="createUserForm.motherfirstmame.$error" ng-if="createUserForm.motherfirstmame.$touched">
                  <p ng-message="required">Mother first name is required.</p>
                </div>
              </div>
            </div>
            <label>Contacts:</label>
            <div class="row">
              <div class="form-group col-xs-6">
                <input type="text" id="addressline" name="addressline" class="form-control" ng-model="user.address" placeholder="Address Line" required>
                <div class="help-block" ng-messages="createUserForm.addressline.$error" ng-if="createUserForm.addressline.$touched">
                  <p ng-message="required">Address is required.</p>
                </div>
              </div>
              <div class="form-group col-xs-3">
                <input type="text" id="city" name="city" class="form-control" ng-model="user.city" placeholder="City" required>
                <div class="help-block" ng-messages="createUserForm.city.$error" ng-if="createUserForm.city.$touched">
                  <p ng-message="required">City is required.</p>
                </div>
              </div>
              <div class="form-group col-xs-3">
                <input type="text" id="zipcode" name="zipcode" class="form-control" ng-model="user.zipCode" placeholder="Zip Code" required>
                <div class="help-block" ng-messages="createUserForm.zipcode.$error" ng-if="createUserForm.zipcode.$touched">
                  <p ng-message="required">Zip code is required.</p>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-xs-9">
                <label for="formEmails">Emails:</label>
                <ul id="formEmails">
                  <li ng-repeat="email in user.emails" ng-class="{'selected':$index == selectedEmail}" ng-click="setClickedEmail($index)">
                    {{email.owner}}: {{email.address}}
                  </li>
                </ul>
              </div>
              <div class="form-group col-xs-1">
                <button type="button" class="btn btn-primary btn-xs" ng-click="userCtrl.addNewEmail('lg')">
                  <i class="glyphicon glyphicon-plus"></i>
                </button>
                <button type="button" class="btn btn-warning btn-xs" ng-disabled="user.emails.$isEmpty()" ng-click="userCtrl.removeEmail(selectedEmail)">
                  <i class="glyphicon glyphicon-minus-sign"></i>
                </button>
                <button type="button" class="btn btn-warning btn-xs" ng-disabled="user.emails.$isEmpty()" ng-click="userCtrl.editEmail(selectedEmail, 'lg')">
                  <i class="glyphicon glyphicon-edit"></i>
                </button>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-xs-9">
                <label for="formPhones">Phones:</label>
                <ul id="formPhones">
                  <li ng-repeat="phone in user.phones" ng-class="{'selected':$index == selectedPhone}" ng-click="setClickedPhone($index)">
                    {{phone.owner}} {{phone.type}}: {{phone.number | phonenumber}}
                  </li>
                </ul>
              </div>
              <div class="form-group col-xs-1">
                <button type="button" class="btn btn-primary btn-xs" ng-click="userCtrl.addNewPhone('lg')">
                  <i class="glyphicon glyphicon-plus"></i>
                </button>
                <button type="button" class="btn btn-warning btn-xs" ng-disabled="user.phones.$isEmpty()" ng-click="userCtrl.removePhone(selectedPhone)">
                  <i class="glyphicon glyphicon-minus-sign"></i>
                </button>
                <button type="button" class="btn btn-warning btn-xs" ng-disabled="user.phones.$isEmpty()" ng-click="userCtrl.editPhone(selectedPhone, 'lg')">
                  <i class="glyphicon glyphicon-edit"></i>
                </button>
              </div>
            </div>
          </div>
          <div class="col-xs-5">
            <div class="form-group">
              <img ng-src="data:image/jpeg;base64,{{user.picture}}" id="photo-id" width="260px" height="240px" placeholder="Student Photo"/>
            </div>
            <button type="button" class="btn btn-success btn-xs" ng-click="userCtrl.selectPhoto('student')">
              <i class="glyphicon glyphicon-open-file"></i>
            </button>
            <button type="button" class="btn btn-success btn-xs" ng-click="userCtrl.snapPhoto('student')">
              <i class="glyphicon glyphicon-camera"></i>
            </button>
          </div>
        </div>
        <label ng-if="registration==='register'">Classes:</label>
        <div class="row" ng-if="registration==='register'">
          <div class="form-group col-xs-3">
            <select class="form-control" id="gradeLevel" name="gradeLevel" ng-model="user.current_reg.schoolGrade" ng-init="user.current_reg.schoolGrade=''" ng-required="true">
              <option value="">-- Select Grade Level --</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
            </select>
            <div class="help-block" ng-messages="createUserForm.gradeLevel.$error" ng-if="createUserForm.gradeLevel.$touched">
              <p ng-message="required">Grade level is required.</p>
            </div>
          </div>
        </div>
        <div class="row" ng-if="registration==='register'">
          <div class="form-group col-xs-3">
            <select class="form-control" id="glClass" name="glClass" ng-model="user.current_reg.glClass" ng-init="user.current_reg.glClass=''" ng-required="true">
              <option value="">-- Select GL Class --</option>
              <option value="gl-01">GL-01</option>
              <option value="gl-02">GL-02</option>
              <option value="gl-03">GL-03</option>
              <option value="gl-04">GL-04</option>
              <option value="gl-05">GL-05</option>
              <option value="gl-06">GL-06</option>
              <option value="gl-07">GL-07</option>
              <option value="gl-08">GL-08</option>
              <option value="pre-con">PRE-CON</option>
              <option value="confirmation">CONFIRMATION</option>
            </select>
            <div class="help-block" ng-messages="createUserForm.glClass.$error" ng-if="createUserForm.glClass.$touched">
              <p ng-message="required">GL class is required.</p>
            </div>
          </div>

          <div class="form-group col-xs-3">
            <select class="form-control" id="vnClass" name="vnClass" ng-model="user.current_reg.vnClass" ng-init="user.current_reg.vnClass=''">
              <option value="">-- Select VN Class --</option>
              <option value="vn-01">VN-01</option>
              <option value="vn-02">VN-02</option>
              <option value="vn-03">VN-03</option>
              <option value="vn-04">VN-04</option>
              <option value="vn-05">VN-05</option>
              <option value="vn-06">VN-06</option>
              <option value="vn-07">VN-07</option>
              <option value="vn-08">VN-08</option>
              <option value="vn-09">VN-09</option>
            </select>
          </div>
        </div>
        <div class="row" ng-if="registration==='register'">
          <div class="form-group col-xs-3">
            <label>Baptism certificate&nbsp;&nbsp;</label>
            <input type="checkbox" ng-model="user.hasBaptismCert" onclick="return false"/>
          </div>
          <div class="form-group col-xs-2">
            <button type="button" class="btn btn-success btn-xs" ng-disabled="!user.hasBaptismCert" ng-click="userCtrl.viewPhoto('certificate')">
              <i class="glyphicon glyphicon-eye-open"></i>
            </button>
            <button type="button" class="btn btn-success btn-xs" ng-click="userCtrl.selectPhoto('certificate')">
              <i class="glyphicon glyphicon-open-file"></i>
            </button>
            <button type="button" class="btn btn-success btn-xs" ng-click="userCtrl.snapPhoto('certificate')">
              <i class="glyphicon glyphicon-camera"></i>
            </button>
          </div>
        </div>
      </fieldset>
    </form>
  </div>
  <div class="modal-footer">
    <!-- createUserForm.$invalid -->
    <button class="btn btn-success btn-lg" ng-disabled="createUserForm.$invalid" ng-click="ok(); user = {}; user.emails = []; user.phones = [];">Save & Close</button>
    <button class="btn btn-warning btn-lg" ng-click="cancel()">Cancel</button>
  </div>
 </section>
